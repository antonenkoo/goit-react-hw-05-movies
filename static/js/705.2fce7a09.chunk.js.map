{"version":3,"file":"static/js/705.2fce7a09.chunk.js","mappings":"kOAuFA,UAlFe,WACb,OAA0BA,EAAAA,EAAAA,UAAS,IAAnC,eAAOC,EAAP,KAAcC,EAAd,KACA,GAAoCF,EAAAA,EAAAA,UAAS,IAA7C,eAAOG,EAAP,KAAmBC,EAAnB,KACA,GAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KACMC,GAAWC,EAAAA,EAAAA,MACXC,EAAQJ,EAAaK,IAAI,UAQ/BC,EAAAA,EAAAA,YAAU,WAEsB,OAA9BN,EAAaK,IAAI,SACbT,EAASI,EAAaK,IAAI,UAC1BT,EAAS,IAEbW,QAAQC,IAAIC,KAAKC,MAAMC,OAAOC,aAAaC,QAAQ,UAAY,OAE/D,IAAMC,EAAkBL,KAAKC,MAC3BC,OAAOC,aAAaC,QAAQ,OAAQJ,KAAKM,UAAUlB,KAEhDiB,GAAoBV,GAIzBN,EAAcgB,EAEf,GAAE,IAEH,IAAME,EAAW,mCAAG,6FAClBL,OAAOC,aAAaK,WAAW,QAC/BhB,EAA0B,KAAVN,EAAe,CAAES,MAAOT,GAAU,CAAC,GAFjC,SAGKuB,MAAM,qDAAD,OA5Bd,mCA4Bc,kBAC4CvB,GACtE,CAEEwB,OAAQ,QAPM,cAGZC,EAHY,gBAUCA,EAASC,OAVV,OAUZC,EAVY,OAWlBX,OAAOC,aAAaW,QAAQ,OAAQd,KAAKM,UAAUO,EAAKE,UACxD1B,EAAcwB,EAAKE,SAZD,4CAAH,qDAejB,OACE,6BACE,6BACE,kBAAOC,KAAK,OAAOC,MAAO/B,EAAOgC,SAzClB,SAAAC,GACnBhC,EAASgC,EAAEC,OAAOH,MACnB,KAwCK,mBAAQD,KAAK,SAASK,QAASd,EAA/B,wBAIF,eAAIe,MAAO,CAAEC,QAAS,OAAQC,SAAU,QAAxC,SACGpC,EAAWqC,KAAI,SAAAC,GAEd,OADA5B,QAAQC,KAAK2B,EAAWC,cAEtB,eAAwBL,MAAO,CAAEM,OAAQ,QAAzC,UACE,SAAC,KAAD,CAAMC,GAAE,UAAKH,EAAWI,IAAMC,MAAO,CAAEC,KAAMvC,GAA7C,UACE,iBAAK6B,MAAO,CAAEW,MAAO,SAArB,WACE,gBACEX,MAAO,CAAEW,MAAO,SAChBC,IACER,EAAWC,YAAX,0CACuCD,EAAWC,aAC9CQ,EAENC,IAAI,MAEN,uBAAIV,EAAWW,cAZZX,EAAWI,GAiBvB,QAIR,C","sources":["pages/MoviesSearch.jsx"],"sourcesContent":["// import styled from 'styled-components';\nimport { useState, useEffect } from 'react';\nimport { Link, useLocation, useSearchParams } from 'react-router-dom';\nimport notFound from '../imgs/photo_2022-10-21_12-18-13.jpg';\n\nconst Movies = () => {\n  const [input, setInput] = useState('');\n  const [searchList, setSearchList] = useState([]);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const location = useLocation();\n  const query = searchParams.get('query');\n\n  const API_KEY = 'cc1be8043ea5c323822776e71613d749';\n\n  const handleChange = e => {\n    setInput(e.target.value);\n  };\n\n  useEffect(() => {\n    // console.log(searchParams.get('query'));\n    searchParams.get('query') !== null\n      ? setInput(searchParams.get('query'))\n      : setInput('');\n\n    console.log(JSON.parse(window.localStorage.getItem('list')) || 'lol');\n\n    const prevQueryResult = JSON.parse(\n      window.localStorage.getItem('list', JSON.stringify(searchList))\n    );\n    if (!prevQueryResult || !query) {\n      return;\n    }\n\n    setSearchList(prevQueryResult);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleClick = async () => {\n    window.localStorage.removeItem('list');\n    setSearchParams(input !== '' ? { query: input } : {});\n    const response = await fetch(\n      `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${input}`,\n      {\n        // HTTP Method\n        method: 'GET',\n      }\n    );\n    const data = await response.json();\n    window.localStorage.setItem('list', JSON.stringify(data.results));\n    setSearchList(data.results);\n  };\n\n  return (\n    <main>\n      <form>\n        <input type=\"text\" value={input} onChange={handleChange} />\n        <button type=\"button\" onClick={handleClick}>\n          Search\n        </button>\n      </form>\n      <ul style={{ display: 'flex', flexWrap: 'wrap' }}>\n        {searchList.map(searchItem => {\n          console.log(!searchItem.poster_path);\n          return (\n            <li key={searchItem.id} style={{ margin: '10px' }}>\n              <Link to={`${searchItem.id}`} state={{ from: location }}>\n                <div style={{ width: '100px' }}>\n                  <img\n                    style={{ width: '100px' }}\n                    src={\n                      searchItem.poster_path\n                        ? `https://image.tmdb.org/t/p/w342/${searchItem.poster_path}`\n                        : notFound\n                    }\n                    alt=\"\"\n                  />\n                  <p>{searchItem.title}</p>\n                </div>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    </main>\n  );\n};\n\nexport default Movies;\n"],"names":["useState","input","setInput","searchList","setSearchList","useSearchParams","searchParams","setSearchParams","location","useLocation","query","get","useEffect","console","log","JSON","parse","window","localStorage","getItem","prevQueryResult","stringify","handleClick","removeItem","fetch","method","response","json","data","setItem","results","type","value","onChange","e","target","onClick","style","display","flexWrap","map","searchItem","poster_path","margin","to","id","state","from","width","src","notFound","alt","title"],"sourceRoot":""}